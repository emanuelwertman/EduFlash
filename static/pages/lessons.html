<link rel="stylesheet" href="static/styles/lessons.css">

<section class="lessons-container">
  <!-- Lesson Header -->
  <div class="lesson-header glass">
    <div class="header-content">
      <button id="backBtn" class="back-button">
        ← Back to Paths
      </button>
      <div class="lesson-meta">
        <p id="lessonPath" class="lesson-path"></p>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div id="loadingState" class="loading-state glass">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <h3>Loading your lesson...</h3>
      <p>Please wait while we fetch the content from our servers.</p>
    </div>
  </div>

  <!-- Error State -->
  <div id="errorState" class="error-state glass" style="display: none;">
    <div class="error-content">
      <div class="error-icon">
        <i class="fas fa-exclamation-triangle"></i>
      </div>
      <h3>Lesson Not Found</h3>
      <p>We couldn't find a lesson for this topic. Would you like to create one with AI?</p>
      <div class="error-actions">
        <button id="createLessonBtn" class="create-lesson-btn">
          <i class="fas fa-brain"></i>
          Create with AI
        </button>
        <button id="backToTopicsBtn" class="back-to-topics-btn">
          ← Back to Paths
        </button>
      </div>
    </div>
  </div>

  <!-- Lesson Content -->
  <div id="lessonContent" class="lesson-content-container" style="display: none;">
    <div class="lesson-content glass">
      <!-- Lesson Title -->
      <div class="lesson-title-section">
        <h1 id="lessonTitle" class="lesson-title">Lesson Title</h1>
      </div>
      
      <!-- Lesson Stats Bar -->
      <div class="lesson-stats-bar">
        <div class="lesson-stats">
          <div class="stat-item">
            <i class="fas fa-eye"></i>
            <span id="viewCount">0</span>
            <span class="stat-label">views</span>
          </div>
          <div class="stat-item">
            <i class="fas fa-user"></i>
            <span class="stat-label">by</span>
            <span id="authorName">Unknown</span>
          </div>
        </div>
        <div class="lesson-actions">
          <button id="likeBtn" class="action-btn like-btn">
            <i class="fas fa-thumbs-up"></i>
            <span id="likeCount">0</span>
          </button>
          <button id="dislikeBtn" class="action-btn dislike-btn">
            <i class="fas fa-thumbs-down"></i>
            <span id="dislikeCount">0</span>
          </button>
          <button id="reportBtn" class="action-btn report-btn" title="Report inappropriate content">
            <i class="fas fa-flag"></i>
          </button>
          <button id="shareBtn" class="action-btn share-btn" title="Share this lesson">
            <i class="fas fa-share"></i>
          </button>
        </div>
      </div>

      <div id="renderedContent" class="rendered-content">
        <!-- Markdown/LaTeX content will be rendered here -->
      </div>
    </div>
    
    <!-- Related Lessons -->
    <div id="relatedLessons" class="related-lessons glass" style="display: none;">
      <h3>Related Lessons</h3>
      <div id="relatedLessonsList" class="related-lessons-list">
        <!-- Related lessons will be populated here -->
      </div>
    </div>
    
    <!-- Navigation Footer -->
    <div class="lesson-navigation glass">
      <button id="prevLessonBtn" class="nav-btn prev-btn" style="display: none;">
        <i class="fas fa-chevron-left"></i>
        Previous Lesson
      </button>
      <div class="lesson-progress">
        <span id="progressText">Lesson Progress</span>
        <div class="progress-bar">
          <div id="progressFill" class="progress-fill"></div>
        </div>
      </div>
      <button id="nextLessonBtn" class="nav-btn next-btn" style="display: none;">
        Next Lesson
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>

  <!-- Report Modal -->
  <div id="reportModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Report Content</h3>
        <button id="closeReportModal" class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <p>Please select a reason for reporting this lesson:</p>
        <div class="report-reasons">
          <label><input type="radio" name="reportReason" value="inappropriate"> Inappropriate content</label>
          <label><input type="radio" name="reportReason" value="incorrect"> Incorrect information</label>
          <label><input type="radio" name="reportReason" value="spam"> Spam or irrelevant</label>
          <label><input type="radio" name="reportReason" value="copyright"> Copyright violation</label>
          <label><input type="radio" name="reportReason" value="other"> Other</label>
        </div>
        <textarea id="reportComment" placeholder="Additional details (optional)..." rows="3"></textarea>
      </div>
      <div class="modal-footer">
        <button id="cancelReport" class="btn-secondary">Cancel</button>
        <button id="submitReport" class="btn-primary">Submit Report</button>
      </div>
    </div>
  </div>

  <!-- Share Modal -->
  <div id="shareModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Share This Lesson</h3>
        <button id="closeShareModal" class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div class="share-option">
          <label>Direct Link:</label>
          <div class="share-link-container">
            <input type="text" id="shareLink" readonly>
            <button id="copyLinkBtn" class="copy-btn">
              <i class="fas fa-copy"></i>
            </button>
          </div>
        </div>
        <div class="share-buttons">
          <button class="social-btn twitter-btn" data-platform="twitter">
            <i class="fab fa-twitter"></i>
            Twitter
          </button>
          <button class="social-btn facebook-btn" data-platform="facebook">
            <i class="fab fa-facebook"></i>
            Facebook
          </button>
          <button class="social-btn reddit-btn" data-platform="reddit">
            <i class="fab fa-reddit"></i>
            Reddit
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- External Libraries for Markdown and LaTeX rendering -->
<script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
